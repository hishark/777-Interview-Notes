# 43.-1n-zheng-shu-zhong-1-chu-xian-de-ci-shu-todo

## 1. [é—®é¢˜](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/)

è¾“å…¥ä¸€ä¸ªæ•´æ•° n ï¼Œæ±‚1ï½nè¿™nä¸ªæ•´æ•°çš„åè¿›åˆ¶è¡¨ç¤ºä¸­1å‡ºç°çš„æ¬¡æ•°ã€‚

ä¾‹å¦‚ï¼Œè¾“å…¥12ï¼Œ1ï½12è¿™äº›æ•´æ•°ä¸­åŒ…å«1 çš„æ•°å­—æœ‰1ã€10ã€11å’Œ12ï¼Œ1ä¸€å…±å‡ºç°äº†5æ¬¡ã€‚

**ç¤ºä¾‹ 1ï¼š**

```text
è¾“å…¥ï¼šn = 12
è¾“å‡ºï¼š5
```

**ç¤ºä¾‹ 2ï¼š**

```text
è¾“å…¥ï¼šn = 13
è¾“å‡ºï¼š6
```

**é™åˆ¶ï¼š**

* `1 <= n < 2^31`

## 2. æ ‡ç­¾

* æ•°å­¦
* æ‰¾è§„å¾‹

## 3. è§£æ³• - æ‰¾è§„å¾‹

> å¥½çš„ï¼Œæ‰¾è§„å¾‹é¢˜æˆ‘æ”¾å¼ƒï¼Œæœ¬çŒªè„‘å­æƒ³å¤šä¹…éƒ½æ˜¯æƒ³ä¸å‡ºçš„ ğŸ¤¯

### 3.1 Java

```java
class Solution {
    public int countDigitOne(int n) {
        // digit æ˜¯ã€Œä½å› å­ã€
        int digit = 1;
        int ans = 0;

        // å½“å‰ä½
        int cur = n % 10;
        // curä¹‹å‰çš„æ‰€æœ‰é«˜ä½
        int high = n / 10;
        // curä¹‹åä¼šçš„æ‰€æœ‰ä½ä½
        int low = 0;

        // ä»æœ€ä½ä½ä¸€ç›´å¾ªç¯éå†åˆ°æœ€é«˜ä½
        while (high != 0 || cur != 0) {
            // curä¸º0æ—¶ï¼Œç»“æœåªç”±é«˜ä½å†³å®šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œçœ‹kä½¬ï¼Œæ‰¾è§„å¾‹å¤ªéš¾äº†æˆ‘ä¸ä¼š555
            if (cur == 0)
                ans += high * digit;
            // curä¸º1æ—¶ï¼Œç»“æœç”±é«˜ä½ä½ä¸€èµ·å†³å®š
            else if (cur == 1)
                ans += high * digit + low + 1;
            // curä¸ºå…¶ä»–æ•°å­—æ—¶ï¼Œç»“æœåªç”±é«˜ä½å†³å®š
            else 
                ans += (high + 1) * digit;

            // æ›´æ–°cur hight low
            low += cur * digit;
            cur = high % 10;
            high /= 10;
            digit *= 10;
        }
        return ans;
    }
}
```

### 3.2 Kotlin

```kotlin
class Solution {
    fun countDigitOne(n: Int): Int {
        // digit æ˜¯ã€Œä½å› å­ã€
        var digit = 1
        var ans = 0

        // å½“å‰ä½
        var cur = n % 10
        // curä¹‹å‰çš„æ‰€æœ‰é«˜ä½
        var high = n / 10
        // curä¹‹åä¼šçš„æ‰€æœ‰ä½ä½
        var low = 0

        // ä»æœ€ä½ä½ä¸€ç›´å¾ªç¯éå†åˆ°æœ€é«˜ä½
        while (high != 0 || cur != 0) {
            // curä¸º0æ—¶ï¼Œç»“æœåªç”±é«˜ä½å†³å®šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œçœ‹kä½¬ï¼Œæ‰¾è§„å¾‹å¤ªéš¾äº†æˆ‘ä¸ä¼š555
            if (cur == 0)
                ans += high * digit
            else if (cur == 1)
                ans += high * digit + low + 1
            else
                ans += (high + 1) * digit// curä¸ºå…¶ä»–æ•°å­—æ—¶ï¼Œç»“æœåªç”±é«˜ä½å†³å®š
            // curä¸º1æ—¶ï¼Œç»“æœç”±é«˜ä½ä½ä¸€èµ·å†³å®š

            // æ›´æ–°cur hight low
            low += cur * digit
            cur = high % 10
            high /= 10
            digit *= 10
        }
        return ans
    }
}
```

### 3.3 å¤æ‚åº¦åˆ†æ

* æ—¶é—´å¤æ‚åº¦ `O(logn)` ï¼šå¾ªç¯å†…çš„è®¡ç®—æ“ä½œä½¿ç”¨ `O(1)` æ—¶é—´ï¼Œæ€»å…±å¾ªç¯äº†$$O(log_{10}n)$$æ¬¡ ï¼Œå› æ­¤å¾ªç¯æ€»å…±ä½¿ç”¨äº† `O(logn)` çš„æ—¶é—´ã€‚
* ç©ºé—´å¤æ‚åº¦ `O(1)` ï¼šå˜é‡åªä½¿ç”¨äº†å¸¸æ•°å¤§å°çš„é¢å¤–å­˜å‚¨ç©ºé—´ã€‚

## 4. å‚è€ƒ

* [https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/)
* [https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/solution/mian-shi-ti-43-1n-zheng-shu-zhong-1-chu-xian-de-2/](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/solution/mian-shi-ti-43-1n-zheng-shu-zhong-1-chu-xian-de-2/)

